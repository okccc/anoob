### install
```shell script
# 安装es
[root@cdh1 ~]$ tar -xvf elasticsearch-6.6.0.tar.gz -C /opt/module/
# 查看版本
[root@cdh1 ~]$ elasticsearch --version
Version: 6.6.0, Build: default/tar/a9861f4/2019-01-24T11:27:09.439740Z, JVM: 1.8.0_201
# 修改yml配置文件,": "后面必须有空格
[root@cdh1 ~]$ vim config/elasticsearch.yml
cluster.name: my-es                                         # 集群名称
node.name: node-1                                           # 节点名称
bootstrap.memory_lock: false                       
bootstrap.system_call_filter: false                         # 关掉bootstrap自检程序
network.host: cdh1                                          # ip地址
http.port: 9200                                             # 端口
discovery.zen.ping.unicast.hosts: ["cdh1", "cdh2", "cdh3"]  # 自发现配置,新节点向集群报到的主机名
# 调整jvm启动内存大小
[root@cdh1 ~]$ vim config/jvm.options
-Xms1g
-Xmx1g
# 分发并修改node.name和network.host
[root@cdh1 ~]$ xsync /opt/module/elasticsearch-6.6.0
# 启动es
[root@cdh1 ~]$ bin/elasticsearch
# 一键启动es集群
[root@cdh1 ~]$ vim es.sh & chmod +x es.sh
#!/bin/bash 
es_home=/opt/module/elasticsearch
kibana_home=/opt/module/kibana
case $1 in
"start"){
    for i in cdh1 cdh2 cdh3
    do
        echo "=============== ${i}启动es ==============="
        ssh ${i} "source /etc/profile && ${es_home}/bin/elasticsearch > /dev/null 2>&1 &"
    done
    echo "=============== 启动kibana ==============="
    nohup ${kibana_home}/bin/kibana > ${kibana_home}/logs/kibana.log 2>&1 &
};;
"stop"){
    echo "=============== 停止kibana ==============="
    ps -ef | grep kibana | grep -v grep | awk '{print \$2}' | xargs kill
    for i in cdh1 cdh2 cdh3
    do
        echo "=============== ${i}停止es ==============="
        ssh ${i} "ps -ef | grep -i 'elastic' | grep -v grep | awk '{print \$2}' | xargs kill" > /dev/null 2>&1
    done
};;
esac
# 测试连接
[root@cdh1 ~]$ curl http://localhost:9200/_cat/nodes?v
ip        heap.percent ram.percent cpu load_1m load_5m load_15m node.role master name
127.0.0.1           19          98  10    2.65                  mdi       *      node-1
# 查看日志
[root@cdh1 ~]$ tail -f /opt/module/elasticsearch-6.6.0/logs/my-es.log

# 安装kibana
[root@cdh1 ~]$ tar -xvf kibana-6.6.0-linux-x86_64.tar.gz -C /opt/module/
# 修改yml配置文件
[root@cdh1 ~]$ vim config/kibana.yml
server.port: 5601       # kibana端口,默认5601
server.host: "0.0.0.0"  # 授权远程访问     
elasticsearch.hosts: ["http://cdh1:9200", "http://cdh2:9200", "http://cdh3:9200"]  # 指定es集群地址,逗号分隔
# 启动测试(要先启动es)
[root@cdh1 ~]$ bin/kibana
```




